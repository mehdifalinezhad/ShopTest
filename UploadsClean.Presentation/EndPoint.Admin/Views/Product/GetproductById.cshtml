@using UploadsClean.Domain.Entities
@model Product

<div class="card">
    <div class="card-body">
        <h6 class="card-title">ویرایش محصول</h6>
        <form role="form" method="post" asp-controller="Product" asp-action="EditProduct" class="needs-validation" novalidate="" enctype="multipart/form-data">
            <input type="hidden" asp-for="Id">
            <div class="form-row">

                <img src="@Model.ImageUrl" style="width:30%;height:10%">


            </div>
            <div class="form-row">
                <div class="col-md-6 mb-3">
                    <label for="validationCustom01">نام </label>
                    <input type="text" class="form-control" asp-for="Name">
                </div>

            </div>
            <div class="form-row">
                <div class="col-md-6 mb-3">
                    <label>تعداد </label>
                    <input type="number" class="form-control" asp-for="Count">

                </div>
                <div class="col-md-6 mb-3">
                    <label for="validationCustom01">قیمت به تومان </label>
                    <input type="text" class="form-control" asp-for="Price">
                </div>
            </div>
            <div class="form-row">
                <div class="col-md-6 mb-6">
                    <label>انتخاب دسته محصول</label>
                    <div class="input -group">
                        <div class="btn-group">
                            <select asp-for="CategoryId" class="custom-select custom-select-lg mb-3َ">
                                @foreach (var item in Model.theCategories)
                                {
                                    <option value="@item.Id">@item.Name</option>
                                }
                            </select>
                        </div>

                    </div>
                </div>



            </div>
            <div class="row">
                <button class="btn btn-primary" type="submit">ویرایش </button>
                <div class="col-md-3 mb-3">
                    <label>تعداد خرید </label>
                    <input type="number" id="countBuy" class="form-control">

                </div>
                <button class="btn btn-Success" onclick="AddTOCart()">افزودن به سبد خرید </button>
            </div>
        </form>
    </div>

</div>

<script type="text/javascript">
    function AddTOCart() {
        alert("in function");
        var countPro = document.getElementById("countBuy");
        $.ajax({
            url: "/Shop/AddToCart",
            type: "Post",
            data: { Id: @Model.Id, Quantity: countPro },
            success: function (response) {
                alert("به سبد خرید اضاف شد");
            },
            error: function (xhr, status, error) {
                console.error(error);
            }
        });
    }
</script>